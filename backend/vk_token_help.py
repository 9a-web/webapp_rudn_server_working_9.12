"""
Инструкция по получению правильного токена для VK Music

VK заблокировал доступ к аудио через обычные токены.
Для работы нужен токен от официального приложения VK или Kate Mobile.
"""

print("""
╔══════════════════════════════════════════════════════════════════════╗
║                    🎵 VK Music - Получение токена                     ║
╠══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  ❌ ПРОБЛЕМА:                                                         ║
║  Ваш текущий токен был получен через стандартную авторизацию VK.      ║
║  VK заблокировал доступ к аудио через такие токены с 2017 года.       ║
║                                                                       ║
║  ✅ РЕШЕНИЕ:                                                          ║
║  Нужен токен от официального приложения VK Android или Kate Mobile.   ║
║                                                                       ║
╠══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  📱 СПОСОБ 1: Через vkpymusic (логин/пароль)                          ║
║  ─────────────────────────────────────────────                        ║
║  from vkpymusic import TokenReceiver                                  ║
║                                                                       ║
║  login = "ваш_телефон_или_email"                                      ║
║  password = "ваш_пароль"                                              ║
║                                                                       ║
║  receiver = TokenReceiver(login, password)                            ║
║  if receiver.auth():                                                  ║
║      token = receiver.get_token()                                     ║
║      print(f"Токен: {token}")                                         ║
║      receiver.save_to_config()  # Сохранит в ~/.vkpymusic             ║
║                                                                       ║
║  ⚠️ Может потребоваться 2FA код!                                      ║
║                                                                       ║
╠══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  📱 СПОСОБ 2: Через Kate Mobile (ручной)                              ║
║  ────────────────────────────────────────                             ║
║  1. Откройте ссылку в браузере (инкогнито):                           ║
║     https://oauth.vk.com/authorize?client_id=2685278                  ║
║     &scope=65544&redirect_uri=https://api.vk.com/blank.html           ║
║     &response_type=token&v=5.131                                      ║
║                                                                       ║
║  2. Авторизуйтесь в VK                                                ║
║                                                                       ║
║  3. Скопируйте access_token из URL после редиректа                    ║
║                                                                       ║
║  client_id=2685278 - это Kate Mobile                                  ║
║  scope=65544 = audio(8) + offline(8192) + notifications(65536)        ║
║                                                                       ║
╠══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  📱 СПОСОБ 3: Через VK Admin (официальный)                            ║
║  ─────────────────────────────────────────                            ║
║  1. Откройте: https://vkhost.github.io/                               ║
║  2. Выберите "VK Admin" или "Kate Mobile"                             ║
║  3. Авторизуйтесь и скопируйте токен                                  ║
║                                                                       ║
╚══════════════════════════════════════════════════════════════════════╝
""")

# Пробуем проверить, может ли vkpymusic сам получить токен
print("\n🔧 Проверяем возможности vkpymusic TokenReceiver...")
try:
    from vkpymusic import TokenReceiver
    print("✅ TokenReceiver доступен")
    print("   Для получения токена вызовите:")
    print('   receiver = TokenReceiver("login", "password")')
    print('   receiver.auth()')
    print('   token = receiver.get_token()')
except Exception as e:
    print(f"❌ Ошибка: {e}")
